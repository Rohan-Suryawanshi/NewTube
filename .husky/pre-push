#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."
echo ""

# 1. Run TypeScript type checking
echo "ğŸ“ [1/4] Type checking..."
npm run type-check || {
  echo "âŒ Pre-push: TypeScript type check failed.";
  exit 1;
}
echo "âœ… Type check passed."
echo ""

# 2. Run Prettier check
echo "ğŸ’… [2/4] Checking code formatting..."
npm run format:check || {
  echo "âŒ Pre-push: Prettier check failed. Run 'npm run format' to fix formatting.";
  exit 1;
}
echo "âœ… Formatting check passed."
echo ""

# 3. Run linter
echo "ğŸ” [3/4] Running ESLint..."
npm run lint || {
  echo "âŒ Pre-push: Lint failed. Run 'npm run lint:fix' to fix issues.";
  exit 1;
}
echo "âœ… Lint check passed."
echo ""

# 4. Run build to ensure no build errors
echo "ğŸ—ï¸  [4/4] Building project..."
npm run build || {
  echo "âŒ Pre-push: Build failed. Fix build errors before pushing.";
  exit 1;
}
echo "âœ… Build succeeded."
echo ""

echo "âœ… All pre-push checks passed! Ready to push."
